<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{fragments/layout :: include(~{::title},~{},~{::style},~{::script},~{::body})}">
<head>
    <title>Reports - Consumer Reports</title>
    <style>
        table {
            margin-bottom: 0 !important;
        }

        .table td, .table th{
            font-size: 1.4rem;

        }

        .table td div {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 70ch;
        }

        .scroll-container {
            position: relative;
            max-height: 600px;
            overflow-y: auto;
        }

    </style>

    <script>
        var historyFetch = function() {
            var localHistory = sessionStorage.getItem('localHistory');
            if (localHistory != null) {
                localHistory = JSON.parse(localHistory).reverse();
                localHistory.forEach(function (item) {
                    $("#history-chart").append(
                        '<tr><td>' +   item.date  + '</td><td><div><a href="' + item.link + '">' +   item.title  + '</a></div></td></tr>'
                    );
                });
            } else {
                $(".scroll-container").remove();
            }
        }

        $( function() {
            historyFetch();
        });

    </script>


</head>
<body>


<div class="d-flex justify-content-left">
    <h1 class="crux-headline--standard">Review History</h1>
</div>


<div class="d-flex pt-4 scroll-container">
    <table id="history_table" class="table table-striped table-hover">
        <thead class="thead-light">

        <tr>
            <th scope="col">Time</th>
            <th scope="col" style="width: 55%; max-width: 45%;">Page</th>
        </tr>
        </thead>
        <tbody id="history-chart"></tbody>
    </table>
</div>
</body>
</html>